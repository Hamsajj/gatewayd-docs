---
layout: default
title: Observability
nav_order: 8
parent: Using GatewayD
---

# Observability

Observability is a first-class citizen of GatewayD. It generates logs, metrics and traces to make it easier to see what is going on inside. The support for better observability includes support for multiple loggers, logging to multiple outputs, performance metrics and traces of almost everything happening internally.

## Configuration

The configuration parameters for [logging](01-configuration/01-global-configuration/01-loggers.md) and [metrics](01-configuration/01-global-configuration/02-metrics.md) are available in the [global configuration](01-configuration/index.md) file: `gatewayd.yaml`. Tracing can be enabled via the `--tracing` flag of the [CLI](02-CLI.md).

## Logs

GatewayD supports multiple loggers. Each logger can send logs to multiple outputs, including console, stdout, stderr, file, Syslog and Rsyslog. The loggers generate structured logs, which can be easily parsed by log aggregators such as [fluentbit](https://fluentbit.io/). The log messages are also human-readable, as shown in the example below.

![Logs in console](assets/console-log.png)

Logs generated by the plugins are aggregated by GatewayD and sent to the loggers with an extra key/value field, for example `plugin=gatewayd-plugin-cache`, so that they can be filtered out for analysis.

Plugins have their own log level settings, which can be configured in the [plugins configuration](01-configuration/02-plugins-configuration/02-plugins-configuration.md) file: `gatewayd_plugins.yaml`.

The log level of GatewayD affects the aggregation of logs from the plugins. For example, if the log level of GatewayD is set to `info`, all the `deubg` logs from plugins will be discarded.

## Metrics

Metrics are exposed from GatewayD and the plugins in Prometheus format. GatewayD collects, relabels and merges Prometheus metrics from all the plugins and exposes them over `http://localhost:2112/metrics` by default, which is [configurable](01-configuration/01-global-configuration/02-metrics.md#configuration-parameters). List of built-in metrics are available [here](01-configuration/01-global-configuration/02-metrics.md#built-in-metrics).

![Metrics](assets/prometheus.png)

Metrics generated by the plugins are aggregated by GatewayD and exposed over the Unix Domain Socket, so that the *metrics merger* can read them, relabel them with an extra label, for example `plugin=gatewayd_plugin_cache` and merged with the metrics of GatewayD. The extra label is added, so that the plugins metrics can be filtered out for analysis.

Plugins can choose to expose metrics to GatewayD. The metrics merger can be configured in the [plugins configuration](01-configuration/02-plugins-configuration/02-plugins-configuration.md) and the metrics merger can be configured in the [general plugin configuration](01-configuration/01-global-configuration/02-metrics.md).

## Traces

Tracing can be enabled from the CLI. Once enabled, GatewayD will send traces in OpenTelemetry format via gRPC to supported backends, such as [Jaeger](https://www.jaegertracing.io/) and [Grafana Tempo](https://grafana.com/oss/tempo/).

![Traces](assets/jaeger.png)

Currently the traces are generated for the following events and they are all grouped under the `GatewayD` service:

* Creation and initialization of GatewayD objects
* Sentry initialization
* Plugin health check and its events
* Metrics server
* Server start and shutdown
* Plugin metrics merger and its events
* Client events
* Proxy events
* Plugin registry events
* Pool events

Plugins can also generate traces, but they are not collected by GatewayD. The plugins can be configured to send traces to the supported backends individually in their [configuration](01-configuration/02-plugins-configuration/02-plugins-configuration.md) parameters.
